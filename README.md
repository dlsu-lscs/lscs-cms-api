# LSCS CMS API

- docs: [https://docs.google.com/document/d/1pCdrbqCXFOat7dLoNG91BZaSON4g-3R_2e0dbLvyQ8E/edit?usp=sharing](https://docs.google.com/document/d/1pCdrbqCXFOat7dLoNG91BZaSON4g-3R_2e0dbLvyQ8E/edit?usp=sharing)

## TODOS

- [x] simple setup, project structure, prettier(done)/eslint(maybe)
- [x] create `.env` file for important env_vars like `MONGO_URI`
- [x] be able to connect to mongodb (via container rn)
- [x] dockerize for easy dev env and prod builds
- [x] create schemas
    - [ ] create comment schema
- [x] services/handlers
- [x] conrollers/routes
    - [x] endpoint: `/organizations` -> CRUD
    - [x] endpoint: `/users` -> CRUD
    - [x] endpoint: `/posts` -> CRUD
    - [ ] endpoint: `/comments` -> CRUD
- [ ] auth and validation
    - [ ] integrate LSCS Central Auth service for auth
    - [ ] only verify JWT generated by the auth service (don't handle refresh tokens directly) - using public key (asymmetric key) or shared secret (symmetric key)
    - [ ] ensure protected routes -> ex. users can only view their own org posts
    - [ ] ...
- [ ] add DOCUMENTATION for the `endpoints` (for the frontend to consume)
    - [ ] docs: `orgsRouter`
    - [ ] docs: `usersRouter`
    - [ ] docs: `postsRouter`
    - [ ] docs: `commentsRouter`


## Start

### Development

- start via `docker`:

```bash
docker compose up -d
```

- test connection via `curl` -> should return "HEALTHY"

```bash
curl http://localhost:3500/
```

- stop when done

```bash
docker compose down
```

### [WIP] Production
- prod:

```bash
npm run start
```

## Endpoints

`/posts` -> GET
- ...description
- example response:
    ```json
    {
        "template": "test",
        "eee": 123,
    }
    ```

`/users` -> GET
- ...description
- example response:
    ```json
    {
        "template": "test",
        "eee": 123,
    }
    ```

`/orgs/:id` -> GET
- ...description
- example response:
    ```json
    {
        "template": "test",
        "eee": 123,
    }
    ```

